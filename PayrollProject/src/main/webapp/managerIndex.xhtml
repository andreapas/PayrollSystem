<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	
<h:head>
	<link rel="stylesheet" type="text/css" href="css/style.css"></link>
	<script type="text/javascript" src="js/scripts.js"></script>
</h:head>

<h:body>

	<script type="text/javascript">
	$( document ).ready(function() {
		showElementsOfRole("#{employeeBean.loggedUser.role}");
	});
	</script>

<!-- 	<h:form> -->
		<div class="ui-g">

			<div class="ui-g-3">

				<p:panel id="mainMenu" header="Menu">
					<h:panelGrid columns="1" cellpadding="10">
					
						<p>Welcome #{employeeBean.loggedUser.name}</p>
						<h:form>
						<h:commandButton value="logout" action="#{sessionManagementBean.logout()}" />
						</h:form>
						<p:button value="Overview" icon="fa fa-eye" onclick="return showOnlyDivByClass('overviewPanel','dynamicPanel')" />
						<p:button value="Settings" icon="fa fa-gears" onclick="return showOnlyDivByClass('settingsPanel','dynamicPanel')" />						
						<p:button value="Employees Management" icon="fa fa-users" onclick="return showOnlyDivByClass('employeesManagementPanel','dynamicPanel')" />
						
					</h:panelGrid>
				</p:panel>

			</div>

			<div class="ui-g-9">

				<p:panel header="Overview" class="dynamicPanel overviewPanel">
					<h:panelGrid cellpadding="10">
						<p:dataTable var="employee" value="#{employeeBean.loggedUser}" rows="1">
							<p:column headerText="Code">
								<h:outputText value="#{employee.code}" />
							</p:column>
							<p:column headerText="Name">
								<h:outputText value="#{employee.name}" />
							</p:column>
							<p:column headerText="Surname">
								<h:outputText value="#{employee.surname}" />
							</p:column>
							<p:column headerText="Email">
								<h:outputText value="#{employee.email}" />
							</p:column>
							<p:column headerText="Union Name">
								<h:outputText value="#{employee.union.unionName}" />
							</p:column>
						</p:dataTable>
					</h:panelGrid>
				</p:panel>
				<p:panel header="Settings" class="dynamicPanel settingsPanel">
				<h:form>
					<p:panel header="Payment Method" class="dynamicPanel settingsPanel">
						<h:panelGrid cellpadding="10">
							<p:outputLabel for="paymentMethod" value="Method of payment:" />
							<p:selectOneRadio id="paymentMethod" value="#{employeeBean.loggedUser.payment_method}">
								<f:selectItem itemLabel="Mailed to the postal address" itemValue="Postal address" />
								<f:selectItem itemLabel="Held for pickup by the paymaster" itemValue="Paymaster" />
								<f:selectItem itemLabel="Deposited into the bank account" itemValue="Bank account" />
							</p:selectOneRadio>
							<p:commandButton value="Submit Payment Method" actionListener="#{employeeBean.editPaymentMethod()}" />
						</h:panelGrid>
					</p:panel>
				</h:form>
				<h:form>
					<p:panel header="Password Management" class="dynamicPanel settingsPanel">
						<h:panelGrid cellpadding="10">
							<h:outputText value="Old Password: " />
							<p:password id="oldPassword" value="#{sessionManagementBean.oldLoginCredentials.password}" required="true" label="password"/>
							
							<h:outputText value="New Password: " />
 							<p:password id="newPassword" value="#{sessionManagementBean.newLoginCredentials.password}" feedback="true" match="repeatNewPassword" required="true"/>

							<h:outputText value="Repeat New Password: " />
 							<p:password id="repeatNewPassword" value="#{sessionManagementBean.newLoginCredentials.password}" feedback="true" required="true"/>
 
							<p:commandButton value="Submit Payment Method" actionListener="#{sessionManagementBean.modifyPassword()}" update="passwordGrowl"/>
							<p:growl id="passwordGrowl" showDetail="true" sticky="true" />  
						</h:panelGrid>
					</p:panel>
				</h:form>
				
				</p:panel>
				
				<p:panel header="User Management" class="dynamicPanel employeesManagementPanel">
					<h:panelGrid cellpadding="5" columns="3">
					
						<p:button value="Add employee" onclick="return showOnlyDivByClass('selectTypePanel','usersSubPanel')" icon="fa fa-user-plus" />
						<p:button value="Delete employee" onclick="return showOnlyDivByClass('deleteEmployeePanel','usersSubPanel');" icon="fa fa-remove" />
						<p:button value="Edit employee" onclick="return showOnlyDivByClass('editEmployeePanel','usersSubPanel');" icon="fa fa-edit" />
						
					</h:panelGrid>
				</p:panel>
				
				<p:panel header="Select type of Employee" class="dynamicPanel usersSubPanel selectTypePanel">
					<h:panelGrid cellpadding="5" columns="2">
						<p:button value="Part-time Employee" onclick="return showOnlyDivByClass('insertDetailsPanelPartTime','typeSubPanel')" />
						<p:button value="Full-time Employee" onclick="return showOnlyDivByClass('insertDetailsPanelFullTime','typeSubPanel')" />
					</h:panelGrid>
				</p:panel>
				<h:form>
				<p:panel header="Insert Employee Details - Part Time Employee" class="dynamicPanel usersSubPanel typeSubPanel insertDetailsPanelPartTime">
					<h:panelGrid id="partGrid" cellpadding="5" columns="2">
						<p:outputLabel for="parthirecode" value="Code:"></p:outputLabel>
						<p:inputText id="parthirecode" placeholder="Code" required="true" value="#{employeeBean.partTimeEmployee.code}"></p:inputText>
						
						<p:outputLabel for="parthirename" value="Name:"></p:outputLabel>
						<p:inputText id="parthirename" placeholder="Name" required="true" value="#{employeeBean.partTimeEmployee.name}"></p:inputText>
						
						<p:outputLabel for="parthiresurname" value="Surname:"></p:outputLabel>
						<p:inputText id="parthiresurname" placeholder="Surname" required="true" value="#{employeeBean.partTimeEmployee.surname}"></p:inputText>
												
						<p:outputLabel for="parthireemail" value="Email:"></p:outputLabel>
						<p:inputText id="parthireemail" placeholder="Email" required="true" value="#{employeeBean.partTimeEmployee.email}"></p:inputText>
						
						<p:outputLabel for="parthirepaymentMethod" value="Payment Method:"></p:outputLabel>
						<p:selectOneMenu id="parthirepaymentMethod" value="#{employeeBean.partTimeEmployee.payment_method}" style="width:125px">
				            <f:selectItem itemLabel="By Hand" itemValue="By Hand" />
				            <f:selectItem itemLabel="Postal Address" itemValue="postal address" />
				            <f:selectItem itemLabel="Bank Account" itemValue="bank account" />
				        </p:selectOneMenu>
						
						<p:outputLabel for="parthirerate" value="Hourly Rate:"></p:outputLabel>
						<p:inputNumber id="parthirerate" required="true" value="#{employeeBean.partTimeEmployee.hourlyRate}" symbol=" €/h" symbolPosition="s" 
                               decimalSeparator="," thousandSeparator="."></p:inputNumber>
						
						<p:outputLabel for="parthireunion" value="Union name:"></p:outputLabel>
						<p:selectOneMenu id="parthireunion" value="#{employeeBean.partTimeEmployee.union}" style="width:125px" converter="unionTranslator">
<!-- 				            <f:selectItem itemLabel="Select One" itemValue="" /> -->
				            <f:selectItems value="#{unionsBean.unionsList}" var="union" itemLabel="#{union.unionName}"/>
				        </p:selectOneMenu>
						
						<p:commandButton value="Add" actionListener="#{employeeBean.hirePartTimeEmployee()}" update="partGrowl"/>
						<p:growl id="partGrowl" showDetail="true" sticky="true" />  
					</h:panelGrid>
				</p:panel>
				</h:form>
				<h:form>
				<p:panel header="Insert Employee Details - Full Time Employee" class="dynamicPanel usersSubPanel typeSubPanel insertDetailsPanelFullTime">
					<h:panelGrid id="fullGrid" cellpadding="5" columns="2">					
						<p:outputLabel for="fullhirecode" value="Code:"></p:outputLabel>
						<p:inputText id="fullhirecode" placeholder="Code" required="true" value="#{employeeBean.fullTimeEmployee.code}"></p:inputText>
						
						<p:outputLabel for="fullhirename" value="Name:"></p:outputLabel>
						<p:inputText id="fullhirename" placeholder="Name" required="true" value="#{employeeBean.fullTimeEmployee.name}"></p:inputText>
						
						<p:outputLabel for="fullhiresurname" value="Surname:"></p:outputLabel>
						<p:inputText id="fullhiresurname" placeholder="Surname" required="true" value="#{employeeBean.fullTimeEmployee.surname}"></p:inputText>
						
						<p:outputLabel for="fullhireemail" value="Email:"></p:outputLabel>
						<p:inputText id="fullhireemail" placeholder="Email" required="true" value="#{employeeBean.fullTimeEmployee.email}"></p:inputText>
						
						<p:outputLabel for="fullhirepaymentMethod" value="Payment Method:"></p:outputLabel>
						<p:selectOneMenu id="fullhirepaymentMethod" value="#{employeeBean.fullTimeEmployee.payment_method}" style="width:125px">
				            <f:selectItem itemLabel="Paymaster" itemValue="Paymaster" />
				            <f:selectItem itemLabel="Postal Address" itemValue="Postal address" />
				            <f:selectItem itemLabel="Bank Account" itemValue="Bank account" />
				        </p:selectOneMenu>
						
						<p:outputLabel for="fullhiresalary" value="Salary:"></p:outputLabel>
						<p:inputNumber id="fullhiresalary" required="true" value="#{employeeBean.fullTimeEmployee.salary}" symbol=" €" symbolPosition="s" 
                               decimalSeparator="," thousandSeparator="."></p:inputNumber>
						
						<p:outputLabel for="fullhireunion" value="Union name:"></p:outputLabel>
						<p:selectOneMenu id="fullhireunion" value="#{employeeBean.fullTimeEmployee.union}" style="width:125px" converter="unionTranslator">
<!-- 				            <f:selectItem itemLabel="Select One" itemValue="" /> -->
				            <f:selectItems value="#{unionsBean.unionsList}" var="union" itemLabel="#{union.unionName}"/>
				        </p:selectOneMenu>
						
						
						<p:commandButton value="Add" actionListener="#{employeeBean.hireFullTimeEmployee()}" update="fullGrowl"/>
						<p:growl id="fullGrowl" showDetail="true" sticky="true" />  
					</h:panelGrid>
				</p:panel>
				</h:form>
				
				<h:form>
				<p:panel header="Delete Employee" class="dynamicPanel usersSubPanel deleteEmployeePanel">
					<h:panelGrid columns="3">
							<p:dataTable var="employee" value="#{employeeBean.employeeList}" rows="10"
					                         paginator="true"
					                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					                         rowsPerPageTemplate="5,10,15">
							
								<p:column sortBy="#{employee.code}" headerText="Code">
					            	<h:outputText value="#{employee.code}" />
					        	</p:column>
					        	
					        	<p:column sortBy="#{employee.name}" headerText="Name">
					            	<h:outputText value="#{employee.name}" />
					        	</p:column>
					        	
					        	<p:column sortBy="#{employee.surname}" headerText="Surname">
					            	<h:outputText value="#{employee.surname}" />
					        	</p:column>
							
								<p:column headerText="Email">
					            	<h:outputText value="#{employee.email}" />
					        	</p:column>
					            
					            <p:column headerText="Union">
					            	<h:outputText value="#{employee.union}" />
					        	</p:column>
					            
					            <p:column headerText="Fire Employee">
					            	<h:commandButton value="Fire" action="#{employeeBean.fireEmployee(employee)}"/>
					        	</p:column>
					            
							</p:dataTable>	
<!-- 						<p:outputLabel for="firecode" value="Code:"></p:outputLabel> -->
<!-- 						<p:inputText id="firecode" placeholder="Code" required="true"></p:inputText> -->
					</h:panelGrid>
				</p:panel>
				</h:form>
				<h:form>
				<p:panel header="Edit Employee" class="dynamicPanel usersSubPanel editEmployeePanel">
					<h:panelGrid columns="1" cellpadding="5">
<!-- 						<p:outputLabel for="editcode" value="Code:"></p:outputLabel> -->
<!-- 						<p:inputText id="editcode" placeholder="Code" required="true"></p:inputText> -->
						<p:outputLabel for="emailEdit" value="Email:"></p:outputLabel>
						<p:inputText id="emailEdit" placeholder="Email"></p:inputText>
<!-- 						<p:outputLabel for="union" value="Union name:"></p:outputLabel> -->
<!-- 						<p:inputText id="union" placeholder="Union name"></p:inputText> -->
<!-- 						<p:button id="edit" value="Edit" onclick="return false"></p:button> -->
					</h:panelGrid>
				</p:panel>
				</h:form>

			</div>
			
		</div>
<!-- 	</h:form> -->

</h:body>
</html>